@model IEnumerable<WebProject.Models.TopMenu>

<ul class="menu animate__animated" id="menu">
    <li class="menu-item">
        <a asp-controller="Home" asp-action="Index">Anasayfa</a>
    </li>
    @foreach (var item in Model)
    {
        if (item.ParentId == null)
        {
            <li class="menu-item">
                @if (item.ParentId == null && Model.Where(a => a.ParentId == item.Id).Any())
                {
                    <a href="@item.Link">@item.Adi</a>
                }
                else if (item.ParentId == null && Model.Where(a => a.ParentId != item.Id).Any())
                {
                    var link = "";
                    if (!String.IsNullOrEmpty(item.Link))
                    {
                        link = item.Link;
                        <a href="@link">@item.Adi</a>
                    }
                    else
                    {
                        link = item.Adi;
                        <a href="@link">@item.Adi</a>
                    }
                }

                @if (item.ParentId == null && Model.Where(a => a.ParentId == item.Id).Any())
                {
                    <p class="sub-menu-icon">
                        <svg class="icon icon-circle-down">
                            <use xlink:href="#icon-circle-down"></use>
                        </svg>
                    </p>

                    <ul class="sub-menu">
                        @foreach (var item1 in Model.Where(a => item.Id == a.ParentId).OrderBy(x => x.Sira))
                        {
                            var link = "";
                            if (item1.Link != null && item1.Link != "") { link = item1.Link; }
                            else { link = @item.Adi + "/" + item1.Adi; }

                            if (item1.YeniSayfadaAc == false)
                            {
                                <li><a href="@link">@item1.Adi</a></li>
                            }
                            else
                            {
                                <li>
                                    <a target="_blank" href="@link">@item1.Adi</a>
                                </li>
                            }
                        }
                    </ul>
                }



            </li>
        }
    }
</ul>